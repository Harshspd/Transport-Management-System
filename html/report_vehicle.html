<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .report-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .report-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .report-filter {
            flex: 1 1 200px;
        }
        .report-filter label {
            display: block;
            margin-bottom: 0.5rem;
            color: #374151;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .report-filter select, .report-filter input {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            font-size: 1rem;
            box-sizing: border-box;
            outline: none;
            transition: border-color 0.15s ease-in-out, shadow-sm 0.15s ease-in-out;
        }
        .report-filter select:focus, .report-filter input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
        }
        .report-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .report-table thead th {
            background-color: #f3f4f6;
            color: #374151;
            padding: 1rem;
            text-align: left;
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            border-bottom: 1px solid #d1d5db;
        }
        .report-table tbody td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            font-size: 1rem;
            color: #4b5563;
        }
        .report-table tbody tr:hover {
            background-color: #f9fafb;
        }
        .report-summary {
            background-color: #f0fdf4;
            padding: 1.5rem;
            border-radius: 0.5rem;
            text-align: center;
            border: 1px solid #dcfce7;
            margin-bottom: 2rem;
        }
        .report-summary h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #15803d;
            margin-bottom: 1rem;
        }
        .report-summary p {
            font-size: 1.25rem;
            color: #16a34a;
            font-weight: 700;
        }
        .no-data {
            text-align: center;
            padding: 2rem;
            font-size: 1.25rem;
            color: #6b7280;
        }
        @media (max-width: 768px) {
            .report-filters {
                flex-direction: column;
            }
            .report-filter {
                flex: 1 1 auto;
            }
            .report-table thead {
                display: none;
            }
            .report-table tbody tr {
                display: block;
                margin-bottom: 1rem;
                border: 1px solid #d1d5db;
                border-radius: 0.5rem;
                padding: 1rem;
            }
            .report-table tbody td {
                display: flex;
                justify-content: space-between;
                align-items: center;
                border: none;
                padding: 0.5rem 0;
            }
            .report-table tbody td::before {
                content: attr(data-label);
                font-weight: 600;
                color: #374151;
                display: block;
                margin-bottom: 0.5rem;
            }
            .report-table tbody td:last-child {
                border-bottom: none;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-6">
    <div class="container">
        <h1 class="report-title">Vehicle Report</h1>

        <div class="report-filters">
            <div class="report-filter">
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate">
            </div>
            <div class="report-filter">
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate">
            </div>
            <div class="report-filter">
                <label for="vehicleType">Vehicle Type:</label>
                <select id="vehicleType">
                    <option value="">All Types</option>
                    <option value="truck">Truck</option>
                    <option value="trailer">Trailer</option>
                    <option value="van">Van</option>
                </select>
            </div>
            <div class="report-filter">
                <label for="driverId">Driver:</label>
                <select id="driverId">
                    <option value="">All Drivers</option>
                    </select>
            </div>
        </div>

        <div class="report-table-container">
            <table class="report-table" id="vehicleTable">
                <thead>
                    <tr>
                        <th>Vehicle Number</th>
                        <th>Vehicle Type</th>
                        <th>Driver Name</th>
                        <th>Status</th>
                        <th>Last Service Date</th>
                        <th>Next Service Date</th>
                        <th>Total Mileage</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
            <div class="no-data" id="noDataMessage" style="display:none;">No vehicles found for the selected filters.</div>
        </div>

        <div class="report-summary" id="reportSummary" style="display:none;">
            <h2>Vehicle Summary</h2>
            <p>Total Vehicles: <span id="totalVehicles">0</span></p>
        </div>
    </div>

    <script>
        const vehicleTable = document.getElementById('vehicleTable');
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        const vehicleTypeSelect = document.getElementById('vehicleType');
        const driverSelect = document.getElementById('driverId');
        const noDataMessage = document.getElementById('noDataMessage');
        const reportSummary = document.getElementById('reportSummary');
        const totalVehiclesElement = document.getElementById('totalVehicles');

        // Sample data (replace with your actual data)
        const vehicles = [
            { number: "TRK-123", type: "Truck", driverId: "DRV-001", driverName: "John Doe", status: "Active", lastServiceDate: "2024-06-10", nextServiceDate: "2024-12-10", mileage: 120000 },
            { number: "TRL-456", type: "Trailer", driverId: "DRV-002", driverName: "Jane Smith", status: "Active", lastServiceDate: "2024-05-15", nextServiceDate: "2024-11-15", mileage: 85000 },
            { number: "VAN-789", type: "Van", driverId: "DRV-001", driverName: "John Doe", status: "Inactive", lastServiceDate: "2024-04-20", nextServiceDate: "2024-10-20", mileage: 60000 },
            { number: "TRK-101", type: "Truck", driverId: "DRV-003", driverName: "Mike Johnson", status: "Active", lastServiceDate: "2024-07-01", nextServiceDate: "2025-01-01", mileage: 95000 },
            { number: "TRL-202", type: "Trailer", driverId: "DRV-002", driverName: "Jane Smith", status: "Active", lastServiceDate: "2024-06-01", nextServiceDate: "2024-12-01", mileage: 110000 },
            { number: "VAN-303", type: "Van", driverId: "DRV-004", driverName: "Alice Brown", status: "Inactive", lastServiceDate: "2024-03-15", nextServiceDate: "2024-09-15", mileage: 75000 },
            { number: "TRK-404", type: "Truck", driverId: "DRV-003", driverName: "Mike Johnson", status: "Active", lastServiceDate: "2024-05-01", nextServiceDate: "2024-11-01", mileage: 130000 },
            { number: "TRL-505", type: "Trailer", driverId: "DRV-005", driverName: "Bob Williams", status: "Active", lastServiceDate: "2024-04-01", nextServiceDate: "2024-10-01", mileage: 100000 },
            { number: "VAN-606", type: "Van", driverId: "DRV-004", driverName: "Alice Brown", status: "Active", lastServiceDate: "2024-02-10", nextServiceDate: "2024-08-10", mileage: 50000 },
            { number: "TRK-707", type: "Truck", driverId: "DRV-005", driverName: "Bob Williams", status: "Inactive", lastServiceDate: "2024-07-15", nextServiceDate: "2025-01-15", mileage: 140000 },
        ];

        const drivers = [
            { id: "DRV-001", name: "John Doe" },
            { id: "DRV-002", name: "Jane Smith" },
            { id: "DRV-003", name: "Mike Johnson" },
            { id: "DRV-004", name: "Alice Brown" },
             { id: "DRV-005", name: "Bob Williams" },
        ];

        function populateDropdown(dropdown, items, valueKey, textKey) {
            dropdown.innerHTML = '<option value="">All</option>'; // Clear existing options
            items.forEach(item => {
                const option = document.createElement('option');
                option.value = item[valueKey];
                option.textContent = item[textKey];
                dropdown.appendChild(option);
            });
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
        }

        function generateReport() {
            const startDate = startDateInput.value;
            const endDate = endDateInput.value;
            const vehicleType = vehicleTypeSelect.value;
            const driverId = driverSelect.value;

            const filteredVehicles = vehicles.filter(vehicle => {
                const lastServiceDate = new Date(vehicle.lastServiceDate);

                const startDateMatch = !startDate || new Date(startDate) <= lastServiceDate;
                const endDateMatch = !endDate || new Date(endDate) >= lastServiceDate;
                const vehicleTypeMatch = !vehicleType || vehicle.type === vehicleType;
                const driverIdMatch = !driverId || vehicle.driverId === driverId;

                return startDateMatch && endDateMatch && vehicleTypeMatch && driverIdMatch;
            });

            vehicleTable.querySelector('tbody').innerHTML = ''; // Clear table body
            if (filteredVehicles.length === 0) {
                noDataMessage.style.display = 'block';
                reportSummary.style.display = 'none';
            } else {
                noDataMessage.style.display = 'none';
                reportSummary.style.display = 'block';
                filteredVehicles.forEach(vehicle => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td data-label="Vehicle Number">${vehicle.number}</td>
                        <td data-label="Vehicle Type">${vehicle.type}</td>
                        <td data-label="Driver Name">${vehicle.driverName}</td>
                        <td data-label="Status">${vehicle.status}</td>
                        <td data-label="Last Service Date">${formatDate(vehicle.lastServiceDate)}</td>
                        <td data-label="Next Service Date">${formatDate(vehicle.nextServiceDate)}</td>
                        <td data-label="Total Mileage">${vehicle.mileage}</td>
                    `;
                    vehicleTable.querySelector('tbody').appendChild(row);
                });

                totalVehiclesElement.textContent = filteredVehicles.length;
            }
        }

        // Event listeners for filter changes
        startDateInput.addEventListener('change', generateReport);
        endDateInput.addEventListener('change', generateReport);
        vehicleTypeSelect.addEventListener('change', generateReport);
        driverSelect.addEventListener('change', generateReport);

        // Initial population of dropdowns and report
        window.onload = function() {
            populateDropdown(driverSelect, drivers, 'id', 'name');
            generateReport(); // Generate initial report
        };
    </script>
</body>
</html>
